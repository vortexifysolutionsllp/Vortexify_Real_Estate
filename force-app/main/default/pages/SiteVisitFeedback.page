<apex:page controller="SiteVisitFeedbackController"
           showHeader="false"
           sidebar="false"
           standardStylesheets="false"
           applyHtmlTag="false"
           applyBodyTag="false">

<html>
<head>
    <apex:slds />

    <style>
        body {
            margin: 0;
            min-height: 100vh;
            background: linear-gradient(135deg, #f4f6f9, #e8edf3);
            font-family: "Salesforce Sans", Arial, sans-serif;
        }

        .feedback-container {
            max-width: 560px;
            margin: 80px auto;
            padding: 0 16px;
        }

        .feedback-card {
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 10px 28px rgba(0, 0, 0, 0.15);
            overflow: hidden;
        }

        .feedback-header {
            background: #0176d3;
            color: #ffffff;
            text-align: center;
            font-size: 26px;
            font-weight: 700;
            padding: 24px;
        }

        .feedback-body {
            padding: 32px;
        }

        .feedback-text {
            font-size: 16px;
            color: #444;
            margin-bottom: 28px;
            line-height: 1.6;
            text-align: center;
        }

        .field-block {
            margin-bottom: 24px;
        }

        .field-label {
            font-size: 15px;
            font-weight: 600;
            color: #2e2e2e;
            margin-bottom: 8px;
            display: block;
        }

        /* ‚≠ê STAR RATING */
        .star-rating {
            font-size: 34px;
            color: #d8dde6;
            cursor: pointer;
            user-select: none;
        }

        .star-rating .star.selected {
            color: #f4b400;
        }

        .submit-wrapper {
            text-align: center;
            margin-top: 32px;
        }

        .submit-btn {
            font-size: 16px;
            padding: 12px 36px;
            border-radius: 24px;
        }

        .error-text {
            text-align: center;
            color: #c23934;
            font-size: 16px;
            padding: 40px 20px;
        }
    </style>
 
</head>

<body>
<div class="feedback-container">
    <div class="feedback-card">

        <!-- HEADER -->
        <div class="feedback-header">
            Site Visit Feedback
        </div>

        <div class="feedback-body">

            <!-- FORM (VISIBLE ONLY BEFORE SUBMIT) -->
            <apex:form rendered="{!AND(isValidLink, NOT(isSubmitted))}">
                <apex:messages />

                <div class="feedback-text">
                    Thank you for visiting our site.  
                    We value your feedback and would love to hear your thoughts.
                </div>

                    <!-- Rating -->
                    <div class="field-block">
                        <label class="field-label">Rating</label>
                        <apex:selectList value="{!rating}" size="1"
                            styleClass="slds-select slds-size_1-of-1">
                            <apex:selectOption itemLabel="Select a rating" itemValue=""/>
                            <apex:selectOption itemLabel="1 - Very Poor" itemValue="1"/>
                            <apex:selectOption itemLabel="2 - Poor" itemValue="2"/>
                            <apex:selectOption itemLabel="3 - Average" itemValue="3"/>
                            <apex:selectOption itemLabel="4 - Good" itemValue="4"/>
                            <apex:selectOption itemLabel="5 - Excellent" itemValue="5"/>
                        </apex:selectList>
                    </div>


                <!-- Comments -->
                <div class="field-block">
                    <label class="field-label">Comments</label>
                    <apex:inputTextarea value="{!comments}"
                        rows="5"
                        styleClass="slds-textarea"/>
                </div>

                <!-- Submit -->
                <div class="submit-wrapper">
                    <apex:commandButton value="Submit Feedback"
                        action="{!submitFeedback}"
                        styleClass="slds-button slds-button_brand submit-btn"/>
                </div>
            </apex:form>

            <!-- THANK YOU VIEW (AFTER SUBMIT) -->
            <apex:outputPanel rendered="{!isSubmitted}">
                <div class="feedback-text" style="font-weight:600;">
                    Thank you for filling the form.  
                    We appreciate your valuable feedback.
                </div>
            </apex:outputPanel>

            <!-- INVALID LINK -->
            <apex:outputPanel rendered="{!NOT(isValidLink)}">
                <div class="error-text">
                    This feedback link is invalid or has expired.
                </div>
            </apex:outputPanel>

        </div>
    </div>
</div>
</body>
</html>
</apex:page>